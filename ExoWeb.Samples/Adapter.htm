<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Adapter Sample</title>
    <style type="text/css">
    .sys-template { visibility:hidden; display:none; }
    input.error { border: 2px solid Red; }
    .checkboxlist { border: 1px solid Black; }
    </style>
    <script src="Scripts/JQuery/jquery-1.3.2.js" type="text/javascript"></script>
    <script src="Scripts/MsAjax/MicrosoftAjax.debug.js" type="text/javascript"></script>
    <script src="Scripts/MsAjax/MicrosoftAjaxTemplates.debug.js" type="text/javascript"></script>
    <script src="Scripts/ExoWeb/exoweb.model.js" type="text/javascript"></script>
    <script src="Scripts/ExoWeb/exoweb.jquery.js" type="text/javascript"></script>
    <script src="Scripts/ExoWeb/exoweb.ui.js" type="text/javascript"></script>
    <script src="Scripts/sample-data.js" type="text/javascript"></script>
    <script type="text/javascript">

    	$load(window.data.drivers.__metadata, window.data.drivers.__data);

		//prepare(Driver, ["Addr", "Dealer", ["Name"]]);
    	
    	var driver = new Driver("1");

    	function JsStyleSheet(el) {

    		$("input", el).validated(function(e, issues) {
    			if (issues.length == 0) {
    				$(this).removeClass("error");
    				$(this).attr("title", null);
    			} else {
    				$(this).addClass("error");
    				$(this).attr("title", issues[0].get_message());
    			}
    		});
    	}

    	JsStyleSheet();

    	$("*").rendered(function() {
    		JsStyleSheet(this);
    	});
    </script>
</head>
<body xmlns:sys="javascript:Sys" 
		xmlns:dataview="javascript:Sys.UI.DataView" 
		xmlns:mycontrol="javascript:ExoWeb.UI.MyControl" 
		xmlns:field="javascript:ExoWeb.UI.Field" 
		xmlns:content="javascript:ExoWeb.UI.Content" 
		xmlns:template="javascript:ExoWeb.UI.Template"
		sys:activate="*">
	<table>
		<tbody class="sys-template" sys:attach="dataview" dataview:data="{{ driver }}">
			<tr>
				<td>@=</td>
				<td>{@= Name }</td>
			</tr>
			<tr>
				<td>@=</td>
				<td>{@= BirthDate }</td>
			</tr>
			<tr>
				<td>@</td>
				<td>{@ BirthDate }</td>
			</tr>
			<tr>
				<td>Simple Property Access</td>
				<td>{{ BirthDate }}</td>
			</tr>
			<tr>
				<td>@=</td>
				<td>{@= Cars }</td>
			</tr>
			<tr>
				<td colspan="2">-------------------------------------------------</td>
			</tr>
			<tr>
				<td>{{ $BirthDate }}</td>
				<td><input type='text' sys:value="{@= BirthDate }" /></td>
			</tr>
			<tr sys:attach="content" content:data="{@ Name, prefix=Driver }" />
			<tr sys:attach="content" content:data="{@ BirthDate, label=Birthday }" />
			<tr sys:attach="field" field:source="Name" field:label="Driver" field:isreadonly="true" />
			<tr sys:attach="content" content:data="{@ Cars }" class="checkboxlist" />
			<tr sys:attach="content" content:data="{@ Dealer.Name }" class="readonly" />
			<tr sys:attach="content" content:data="{@ Dealer }" class="dropdown" />
		</tbody>
	</table>
	
	<table>
		<tr sys:attach="template" template:for="tr.dropdown">
			<td>
				<span>{ binding prefix }</span>
				<span>{ binding label }</span>:
			</td>
			<td>
				<span>{ binding value.Id }</span>
				<select sys:value="{ binding value.Id }" class="sys-template" 
					sys:attach="dataview" dataview:data="{ binding options }">
					<option sys:value="{ binding value }">{ binding name }</option>
				</select>
			</td>
		</tr>
		<tr sys:attach="template" template:for="tr.checkboxlist">
			<td colspan="2">
				<table>
					<tbody class="sys-template" sys:attach="dataview" 
						dataview:data="{ binding options }">
						<tr>
							<td>
								<input type="checkbox" id="option" sys:checked="{ binding selected }" />
								<label for="option">{ binding name }</label>
								(<span>{ binding value }</span>)
							</td>
						</tr>
					</tbody>
				</table>
			</td>
		</tr>
		<tr sys:attach="template" template:for="tr.readonly">
			<td>
				<span>{ binding prefix }</span>
				<span>{ binding label }</span>:
			</td>
			<td>
				<span>{ binding value }</span>
				<span>{ binding helptext }</span>
			</td>
		</tr>
		<tr sys:attach="template" template:for="tr">
			<td>
				<span>{ binding prefix }</span>
				<span>{ binding label }</span>:
			</td>
			<td>
				<input type="text" sys:value="{ binding value }" />
				<span>{ binding helptext }</span>
			</td>
		</tr>
	</table>
</body>
</html>
