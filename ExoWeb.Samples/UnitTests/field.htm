<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Field Tests</title>
		<link href="../Styles/QUnit/qunit.css" type="text/css" rel="stylesheet" />
		<style type="text/css">
			.vc3-field-templates, .sys-template { display: none; }
			.sandbox { border: 2px solid #333; }
			.inputform { background: #E9E9E9; }
			.emphasis { font-style: italic; font-weight: bold; }
			.small { font-size: small; }
		</style>
		<script src="../Scripts/JQuery/jquery-1.3.2.js" type="text/javascript"></script>
		<script src="../Scripts/QUnit/qunit.js" type="text/javascript"></script>
		<script src="../Scripts/MsAjax/start.debug.js" type="text/javascript"></script>
		<script src="../Scripts/MsAjax/MicrosoftAjax.debug.js" type="text/javascript"></script>
		<script src="../Scripts/MsAjax/MicrosoftAjaxTemplates.debug.js" type="text/javascript"></script>
		<script src="../Scripts/ExoWeb/exoweb.model.js" type="text/javascript"></script>
		<script src="../Scripts/ExoWeb/exoweb.ui.js" type="text/javascript"></script>
		<script src="../Scripts/sample-data.js" type="text/javascript"></script>
		<script type="text/javascript">
			$load(window.data.drivers.__metadata, window.data.drivers.__data);
			var driver = new Driver("1");
		</script>
		<script type="text/javascript">
			function rendered(){
				test("Template Selection", function() {
					var validateSelection = function(element, selector) {
						var tmpl = element.control.get_template().get_element();
						equals($(tmpl)[0].control.get_for(), selector, "Expected template");
					}

					validateSelection($get("id-p-span0"), "p span");
					validateSelection($get("name-p-span0"), "p span");
					validateSelection($get("id-inputform-p-span0"), "p.inputform span");
					validateSelection($get("name-inputform-p-span0"), "p.inputform span");
					validateSelection($get("id-inputform-p-span-emphasis0"), "p.inputform span.emphasis");
					validateSelection($get("name-inputform-p-span-emphasis0"), "p.inputform span.emphasis");
					validateSelection($get("id-tr0"), "table tr");
					validateSelection($get("name-tr0"), "table tr");
					validateSelection($get("id-inputform-tr0"), "table.inputform tr");
					validateSelection($get("name-inputform-tr0"), "table.inputform tr");
					validateSelection($get("id-inputform-tr-small0"), "table.inputform tr.small");
					validateSelection($get("name-inputform-tr-small0"), "table.inputform tr.small");
				});
			}
		</script>
	</head>
	<body xmlns:sys="javascript:Sys" xmlns:dataview="javascript:Sys.UI.DataView" 
		xmlns:field="javascript:ExoWeb.UI.Field" xmlns:template="javascript:ExoWeb.UI.Template" sys:activate="*">
		
		<!-- QUnit Display -->
		<h1 id="qunit-header">Test Results:</h1>
		<h2 id="qunit-banner"></h2>
		<h2 id="qunit-userAgent"></h2>
		<ol id="qunit-tests"></ol>
		
		<div id="sandbox">
			<!-- Fields -->
			<div class="sys-template" sys:attach="dataview" dataview:data="{{ driver }}" dataview:onrendered="{{ rendered }}">
				<p>
					<span id="id-p-span" sys:attach="field" field:source="Id" field:label="Identifier" field:isreadonly="true"></span><br />
					<span id="name-p-span" sys:attach="field" field:source="Name" field:label="Driver Name" field:isreadonly="true"></span>
				</p>
				<p class="inputform">
					<span id="id-inputform-p-span" sys:attach="field" field:source="Id" field:label="Identifier" field:isreadonly="true"></span><br />
					<span id="name-inputform-p-span" sys:attach="field" field:source="Name" field:label="Driver Name" field:isreadonly="true"></span>
				</p>
				<p class="inputform">
					<span id="id-inputform-p-span-emphasis" class="emphasis" sys:attach="field" field:source="Id" field:label="Identifier" field:isreadonly="true"></span><br />
					<span id="name-inputform-p-span-emphasis" class="emphasis" sys:attach="field" field:source="Name" field:label="Driver Name" field:isreadonly="true"></span>
				</p>
				
				<table cellpadding="4" width="100%" cellspacing="0">
					<tr id="id-tr" sys:attach="field" field:source="Id" field:label="Identifier" field:isreadonly="true" />
					<tr id="name-tr" sys:attach="field" field:source="Name" field:label="Driver Name" field:isreadonly="true" />
				</table>
				<table cellpadding="4" width="100%" cellspacing="0" class="inputform">
					<tr id="id-inputform-tr" sys:attach="field" field:source="Id" field:label="Identifier" field:isreadonly="true" />
					<tr id="name-inputform-tr" sys:attach="field" field:source="Name" field:label="Driver Name" field:isreadonly="true" />
				</table>
				<table cellpadding="4" width="100%" cellspacing="0" class="inputform">
					<tr id="id-inputform-tr-small" class="small" sys:attach="field" field:source="Id" field:label="Identifier" field:isreadonly="true" />
					<tr id="name-inputform-tr-small" class="small" sys:attach="field" field:source="Name" field:label="Driver Name" field:isreadonly="true" />
				</table>
			</div>
		</div>
		
		<!-- Templates -->
		<span sys:attach="template" template:for="p.inputform span.emphasis">
			<span>{ binding label }</span>: <span>{ binding value }</span> - <span>p.inputform span.emphasis</span>
		</span>
		<span sys:attach="template" template:for="p.inputform span">
			<span>{ binding label }</span>: <span>{ binding value }</span> - <span>p.inputform span</span>
		</span>
		<span sys:attach="template" template:for="p span">
			<span>{ binding label }</span>: <span>{ binding value }</span> - <span>p span</span>
		</span>
		
		<table>
			<tr sys:attach="template" template:for="table.inputform tr.small">
				<td>{ binding label }</td>
				<td>{ binding value }</td>
				<td>table.inputform tr.small</td>
			</tr>
			<tr sys:attach="template" template:for="table.inputform tr">
				<td>{ binding label }</td>
				<td>{ binding value }</td>
				<td>table.inputform tr</td>
			</tr>
			<tr sys:attach="template" template:for="table tr">
				<td>{ binding label }</td>
				<td>{ binding value }</td>
				<td>table tr</td>
			</tr>
		</table>
	</body>
</html>
